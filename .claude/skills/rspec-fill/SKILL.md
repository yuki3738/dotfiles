---
name: rspec-fill
description: 実装コードを分析し、不足しているRSpecテストを埋めて高カバレッジを実現してください。
---

実行手順:
1. 対象の実装ファイルを特定し、内容を読み込む
2. 対応するspecファイルの存在を確認（_spec.rbサフィックス）
3. 以下のいずれかを実行:

【specファイルが存在する場合】
- 既存のspecファイルを読み込み、実装コードと比較
- テストされていないメソッド、条件分岐、エッジケースを特定
- 不足しているテストケースを追加してギャップを埋める
- 既存のテストスタイルと一貫性を保持

【specファイルが存在しない場合】
- 新規specファイルを作成（spec/配下のミラー構造）
- 必要なrequireとRSpec設定を追加
- 包括的なテストスイートを構築

テストで埋めるべき項目:
✓ すべてのpublicメソッド
✓ 重要なprivateメソッド
✓ 正常系・異常系の両方
✓ エッジケース（nil、空配列、境界値）
✓ すべての条件分岐パス
✓ 例外処理とエラーハンドリング
✓ 依存関係のモック/スタブ

RSpec記述ルール:
- describeでクラス/モジュールを明確に
- contextで条件を論理的にグループ化
- itは動詞で始め、期待される動作を記述
- let/let!で重複を削減
- expect構文を使用
- 1つのitに1つのアサーション

出力内容:
1. 埋めた内容の要約
2. 追加/修正したテストケースのリスト
3. カバレッジ向上の推定値
4. 実装の潜在的な問題があれば報告

ファイル指定がない場合は、どのファイルに対して変更するかユーザーに確認してください。
