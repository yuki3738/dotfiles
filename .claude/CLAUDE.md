# CLAUDE.md (Global)

- 常に日本語で返答してください
- 技術的に詰まったところや解決できないエラーがあればo3 MCPに英語で相談してください
- タスク完了後、今後のタスク遂行上気をつけるべきルールを発見した場合、なるべく短く簡潔になるようにCLAUDE.local.mdを更新すること

---

## Git ワークフロー

- ベースブランチは**main** masterではないことが多いので、不明なら確認する
- commitメッセージは**Conventional Commits**形式にする

---

## エラー対応の原則

### 「動く別の方法」に逃げない

- エラーが出たら**まず原因を調べる**
- Railsコンソールで実際の戻り値を確認する
- 新しいAPI（expect等）は構文を疑う

---

## テスト失敗時の原則

### テストが落ちたら実装を疑う

- **テストは正しい挙動の定義**: 既存のテストが落ちた場合、それは「実装が壊れた」ことを意味する
- **テストを変える前に立ち止まる**: 「このテストは本当に間違っているのか？」を必ず確認
- 挙動は変えずにRuboCopの違反をしない書き方を探す

---

## デバッグの原則

- 仮説を1つずつ検証する。flip-flopしない
- 3回間違えたら一度立ち止まり、状況を整理して提示する
